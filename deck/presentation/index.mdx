import { Cite, Appear } from "spectacle"
import { WhiteSlide, DarkSlide, CodeSlide } from "./slides"
import RegularComponent from "./regular-component"

# Taking Flight with URQL

export default CodeSlide

<br />

![urqlbanner](urql-banner.gif)

---

![Formidable](Formidable-Icon.png)

<br />

**@FormidableLabs**

---

export default CodeSlide

| this is fine  |          i'm dying          |
| :-----------: | :-------------------------: |
| ![me](me.png) | ![suffering](suffering.png) |

**@ryan_gilb**

---

![poll](poll.png)

---

## what is urql?

<br />

export default CodeSlide

- **U**niversal **R**eact **Q**uery **L**ibrary
- Lightweight open source GraphQL client
- Created and maintained by Formidable

---

## urql features

export default CodeSlide

<table
  style={{ margin: "0 auto", marginTop: "48px", borderCollapse: "collapse" }}
>
  <tbody>
    <tr style={{ textAlign: "left" }}>
      <td style={{ paddingBottom: "16px" }}>✅ React Hooks</td>
    </tr>
    <tr style={{ textAlign: "left" }}>
      <td style={{ paddingBottom: "16px" }}>✅ Simple cache</td>
    </tr>
    <tr style={{ textAlign: "left" }}>
      <td style={{ paddingBottom: "16px" }}>✅ Customizable behavior</td>
    </tr>
    <tr style={{ textAlign: "left" }}>
      <td>✅ Compact bundle size & API</td>
    </tr>
  </tbody>
</table>

---

## Why urql?

<br />

export default CodeSlide

- Simplicity
- Customizability
- Small bundle size (6.5kb min+gzip) & API
- Lower barrier to entry to GraphQL

---

## graphql query

export default CodeSlide

```gql
{
  user(id: "1") {
    id
    username
    email
    likedPosts {
      id
      title
      likes
    }
  }
}
```

---

## response

export default CodeSlide

```json
{
  "user": {
    "id": "1",
    "username": "rick",
    "likedPosts": [
      {
        "id": "4",
        "title": "Big candy mountain",
        "likes": 49
      },
      {
        "id": "7",
        "title": "Why candy corn is underrated",
        "likes": 88
      }
    ]
  }
}
```

---

## What does a GraphQL client do?

export default CodeSlide

- handles data fetching
- performs caching
- integrated into our view layer
- other things

---

export default CodeSlide

![apollo](apollo.png)

---

## urql origin story

---

export default CodeSlide

```json
"dependencies": {
    "apollo-cache-inmemory": "^1.1.7",
    "apollo-client": "^2.2.3",
    "apollo-link-context": "^1.0.7",
    "apollo-link-http": "^1.3.3",
    "react-apollo": "^2.0.4",
}
```

---

export default CodeSlide

```json
"dependencies": {
    "urql": "^1.6.1"
}
```

---

export default CodeSlide

```javascript
function getApolloClient() {
  const httpLink = new HttpLink({
    uri: "/graphql"
  })

  const authLink = setContext(async (_, { headers }) => {
    const token = await AsyncStorage.getItem("jwt")
    return {
      headers: {
        ...headers,
        authorization: token ? `Bearer ${token}` : ""
      }
    }
  })

  const client = new ApolloClient({
    link: authLink.concat(httpLink),
    cache: new InMemoryCache()
  })

  return client
}
```

---

export default CodeSlide

```js
const token = localStorage.getItem("token")
const client = createClient({
  url: "/graphql",
  fetchOptions: {
    headers: {
      authorization: `Bearer ${token}`
    }
  }
})

const App = () => {
  return <Provider value={client}>{/* ... */}</Provider>
}
```

---

## present day urql

---

## Compact Bundle Size

export default CodeSlide

<br />

<table style={{ margin: "0 auto", borderCollapse: "collapse" }}>
  <thead>
    <tr>
      <th style={{ paddingRight: "48px" }}>urql</th>
      <th style={{ paddingRight: "48px" }}>urql & graphcache</th>
      <th>apollo boost & @apollo/react-hooks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{ paddingRight: "48px" }}>6.5kb min+gzip</td>
      <td style={{ paddingRight: "48px" }}>14.5kb min+gzip</td>
      <td>30.1kb min+gzip</td>
    </tr>
  </tbody>
</table>

---

## React Hooks

export default CodeSlide

```js
const [response] = useQuery({
  query: `
    {
      me {
        id
        username
      }
    }
  `
})
// {
//  fetching: false,
//  error: false,
//  data: { me: { id: "1", username: "fez"} }
// }
```

---

## Programmable Core

export default CodeSlide

![exchange](exchange.svg)

---

## Programmable Core

export default CodeSlide

![exchange-chain](exchange-chain.svg)

---

export default WhiteSlide

## Default Exchanges

![default-exchanges](default-exchanges.svg)

---

# DEMO!!!

export default CodeSlide

---

## Thank you

export default CodeSlide

![twitter](twitter.png)

Phil Plückthun: @\_philpl

Jovi De Croock: @JoviDeC

Ryan Gilbert: @ryan_gilb

<br />

http://bit.ly/graphql-denver-10-22
