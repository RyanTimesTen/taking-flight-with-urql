import { Cite, Appear } from "spectacle"
import { WhiteSlide, DarkSlide, CodeSlide } from "./slides"
import RegularComponent from "./regular-component"

# Taking Flight with URQL

export default CodeSlide

<br />

![urqlbanner](urql-banner.gif)

---

![Formidable](Formidable-Icon.png)

<br />

**@FormidableLabs**

---

export default CodeSlide

| this is fine  |          i'm dying          |
| :-----------: | :-------------------------: |
| ![me](me.png) | ![suffering](suffering.png) |

**@ryan_gilb**

---

## what is urql?

![poll](poll.png)

---

## Agenda

- **origin story (urql pre-v1)**
- present day (urql v1.x.x)
- DEMO

---

## GraphQL client landscape

export default CodeSlide

<br />

![apollo-v-relay](apollo-v-relay.png)

---

export default CodeSlide

```json
"dependencies": {
    "apollo-cache-inmemory": "^1.1.7",
    "apollo-client": "^2.2.3",
    "apollo-link-context": "^1.0.7",
    "apollo-link-http": "^1.3.3",
    "react-apollo": "^2.0.4",
}
```

---

export default CodeSlide

```javascript
function getApolloClient() {
  const httpLink = new HttpLink({
    uri: "/graphql"
  })

  const authLink = setContext(async (_, { headers }) => {
    const token = await AsyncStorage.getItem("jwt")
    return {
      headers: {
        ...headers,
        authorization: token ? `Bearer ${token}` : ""
      }
    }
  })

  const client = new ApolloClient({
    link: authLink.concat(httpLink),
    cache: new InMemoryCache()
  })

  return client
}
```

---

export default CodeSlide

```javascript
                      yarn add urql
```

---

export default CodeSlide

```js
// old urql v0.0.1
'import { Provider, Client } from 'urql';

const client = new Client({
  url: '/graphql'
});

'export const App = () => (
  <Provider client={client}>
    {/* ... */}
  </Provider>
);
```

---

## Agenda

- origin story (urql pre-v1)
- **present day (urql v1.x.x)**
- DEMO

---

## urql v1

export default CodeSlide

<table
  style={{ margin: "0 auto", marginTop: "48px", borderCollapse: "collapse" }}
>
  <tbody>
    <tr style={{ textAlign: "left" }}>
      <td style={{ paddingBottom: "16px" }}>✨ Released Feb 2019</td>
    </tr>
    <tr style={{ textAlign: "left" }}>
      <td style={{ paddingBottom: "16px" }}>✅ React Hooks!</td>
    </tr>
    <tr style={{ textAlign: "left" }}>
      <td style={{ paddingBottom: "16px" }}>
        ✅ Custom client behavior via Exchanges!
      </td>
    </tr>
    <tr style={{ textAlign: "left" }}>
      <td>✅ Compact bundle size & compact API surface area!</td>
    </tr>
  </tbody>
</table>

---

## React Hooks

export default CodeSlide

```js
const [{ fetching, error, data }] = useQuery({
  query: `
    {
      me {
        id
        username
      }
    }
  `
})
```

---

## Programmable Core

export default CodeSlide

![exchange](exchange.svg)

---

## Programmable Core

export default CodeSlide

![exchange-chain](exchange-chain.svg)

---

export default WhiteSlide

## Default Exchanges

![default-exchanges](default-exchanges.svg)

---

## Compact Bundle Size

export default CodeSlide

<br />

<table style={{ margin: "0 auto", borderCollapse: "collapse" }}>
  <thead>
    <tr>
      <th style={{ paddingRight: "48px" }}>urql</th>
      <th>apollo (& hooks)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{ paddingRight: "48px" }}>6.5kb min+gzip</td>
      <td>30.1kb min+gzip</td>
    </tr>
  </tbody>
</table>

---

## Useful resources

export default CodeSlide

<br />

<table style={{ margin: "0 auto" }}>
  <tbody>
    <tr>
      <td style={{ paddingBottom: "32px" }}>
        Exchange basics:{" "}
        <b>formidable.com/open-source/urql/docs/architecture/#exchanges</b>
      </td>
    </tr>
    <tr>
      <td style={{ paddingBottom: "32px" }}>
        List of exchanges:{" "}
        <b>formidable.com/open-source/urql/docs/exchanges/</b>
      </td>
    </tr>
    <tr>
      <td style={{ paddingBottom: "32px" }}>
        Exchanges in-depth:{" "}
        <b>
          formidable.com/open-source/urql/docs/guides/#the-rules-of-exchanges
        </b>
      </td>
    </tr>
    <tr>
      <td>
        Graphcache:{" "}
        <b>gist.github.com/kitten/056833ca422a683a6c37d49b15336192</b>
      </td>
    </tr>
  </tbody>
</table>

---

# DEMO!!!

export default CodeSlide
